<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Store - ABHIRAM CREATIONS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #00bfa6;
      --primary-light: #03dac6;
      --dark: #121212;
      --dark-light: #1f1f1f;
      --text: #fff;
      --text-muted: #666;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--dark);
      color: var(--text);
      line-height: 1.6;
    }

    .header {
      background: var(--dark-light);
      padding: 20px 0;
      border-bottom: 2px solid var(--primary);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      color: var(--primary);
      font-size: 1.5rem;
      font-weight: 700;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .nav-links a {
      color: var(--text);
      text-decoration: none;
      transition: var(--transition);
    }

    .nav-links a:hover {
      color: var(--primary);
    }

    .auth-buttons {
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: var(--primary);
      color: var(--dark);
    }

    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .store-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .store-header h1 {
      font-size: 2.5rem;
      color: var(--primary);
      margin-bottom: 10px;
    }

    
    .store-header p {
      color: var(--text-muted);
      font-size: 1.1rem;
    }

    .filters {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .filter-group label {
      font-size: 0.9rem;
      color: var(--primary);
      font-weight: 500;
    }

    .filter-group select,
    .filter-group input {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #444;
      background: var(--dark-light);
      color: var(--text);
      font-family: inherit;
    }

    .search-box {
      min-width: 250px;
    }

    .store-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }

    .store-item {
      background: var(--dark-light);
      border-radius: 12px;
      overflow: hidden;
      transition: var(--transition);
      border: 1px solid #333;
    }

    .store-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,191,166,0.3);
      border-color: var(--primary);
    }

    .item-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      background: linear-gradient(45deg, var(--primary), var(--primary-light));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: var(--dark);
    }

    .item-content {
      padding: 20px;
    }

    .item-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .item-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 5px;
    }

    .item-category {
      font-size: 0.8rem;
      color: var(--primary);
      background: rgba(0,191,166,0.1);
      padding: 4px 8px;
      border-radius: 12px;
      display: inline-block;
    }

    .item-price {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--primary);
    }

    .item-description {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .item-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .item-actions {
      display: flex;
      gap: 10px;
    }

    .btn-download {
      background: var(--primary);
      color: var(--dark);
      padding: 10px 20px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      flex: 1;
      text-align: center;
    }

    .btn-purchase {
      background: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
      padding: 10px 20px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      flex: 1;
      text-align: center;
    }

    .btn-download:hover,
    .btn-purchase:hover {
      transform: translateY(-2px);
    }

    .btn-download:hover {
      background: var(--primary-light);
    }

    .btn-purchase:hover {
      background: var(--primary);
      color: var(--dark);
    }

    .login-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--dark-light);
      padding: 30px;
      border-radius: 12px;
      max-width: 400px;
      width: 90%;
      border: 2px solid var(--primary);
    }

    .modal-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .modal-header h2 {
      color: var(--primary);
      margin-bottom: 5px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: var(--primary);
      font-weight: 500;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #444;
      background: var(--dark);
      color: var(--text);
      font-family: inherit;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .btn-close {
      background: #666;
      color: var(--text);
    }

    .google-signin-btn,
    .facebook-signin-btn,
    .instagram-signin-btn {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
      font-family: inherit;
      border: 1px solid;
    }

    .google-signin-btn {
      border-color: #4285f4;
      background: #fff;
      color: #4285f4;
    }

    .google-signin-btn:hover {
      background: #f5f5f5;
      box-shadow: 0 2px 8px rgba(66, 133, 244, 0.3);
    }

    .facebook-signin-btn {
      border-color: #1877f2;
      background: #1877f2;
      color: #fff;
    }

    .facebook-signin-btn:hover {
      background: #166fe5;
      box-shadow: 0 2px 8px rgba(24, 119, 242, 0.3);
    }

    .instagram-signin-btn {
      border-color: #E4405F;
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      color: #fff;
    }

    .instagram-signin-btn:hover {
      opacity: 0.9;
      box-shadow: 0 2px 8px rgba(225, 48, 108, 0.3);
    }

    .google-signin-btn svg,
    .facebook-signin-btn svg,
    .instagram-signin-btn svg {
      width: 20px;
      height: 20px;
    }

    .social-buttons-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 15px;
    }

    .divider {
      display: flex;
      align-items: center;
      text-align: center;
      margin: 20px 0;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid #444;
    }

    .divider span {
      padding: 0 10px;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: var(--primary);
    }

    .error {
      text-align: center;
      padding: 20px;
      color: #ff4757;
      background: rgba(255,71,87,0.1);
      border-radius: 8px;
      margin: 20px 0;
    }

    /* Reviews Section */
    .reviews-section {
      margin-top: 60px;
      padding-top: 40px;
      border-top: 2px solid #333;
    }

    .section-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .section-header h2 {
      font-size: 2rem;
      color: var(--primary);
      margin-bottom: 10px;
    }

    .section-header p {
      color: var(--text-muted);
      font-size: 1rem;
    }

    .reviews-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }

    .review-card {
      background: var(--dark-light);
      border-radius: 12px;
      padding: 25px;
      border: 1px solid #333;
      transition: var(--transition);
      position: relative;
    }

    .review-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,191,166,0.2);
      border-color: var(--primary);
    }

    .review-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .review-author {
      font-weight: 600;
      color: var(--text);
      font-size: 1.1rem;
    }

    .review-rating {
      display: flex;
      gap: 3px;
      color: #ffd700;
      font-size: 1.2rem;
    }

    .review-date {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 15px;
    }

    .review-message {
      color: var(--text);
      line-height: 1.6;
      font-size: 0.95rem;
    }

    .review-form-section {
      background: var(--dark-light);
      border-radius: 12px;
      padding: 30px;
      border: 1px solid #333;
      margin-top: 40px;
    }

    .review-form-section h3 {
      color: var(--primary);
      font-size: 1.5rem;
      margin-bottom: 10px;
    }

    .review-form-section > p {
      color: var(--text-muted);
      margin-bottom: 25px;
    }

    .review-form {
      max-width: 100%;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .star-rating-input {
      display: flex;
      flex-direction: row-reverse;
      justify-content: flex-end;
      gap: 5px;
    }

    .star-rating-input input[type="radio"] {
      display: none;
    }

    .star-rating-input label.star {
      font-size: 2rem;
      color: #444;
      cursor: pointer;
      transition: var(--transition);
    }

    .star-rating-input label.star:hover,
    .star-rating-input label.star:hover ~ label.star {
      color: #ffd700;
    }

    .star-rating-input input[type="radio"]:checked ~ label.star {
      color: #ffd700;
    }

    .star-rating-input input[type="radio"]:checked + label.star {
      color: #ffd700;
    }

    .star-rating-input input[type="radio"]:checked ~ label.star,
    .star-rating-input input[type="radio"]:checked + label.star ~ label.star {
      color: #ffd700;
    }

    .review-form textarea {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #444;
      background: var(--dark);
      color: var(--text);
      font-family: inherit;
      resize: vertical;
    }

    .review-form textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .review-submit-btn {
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      font-size: 1rem;
    }

    .no-reviews {
      text-align: center;
      padding: 40px;
      color: var(--text-muted);
      font-style: italic;
    }

    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        gap: 15px;
      }

      .filters {
        flex-direction: column;
        align-items: stretch;
      }

      .search-box {
        min-width: auto;
      }

      .store-grid {
        grid-template-columns: 1fr;
      }

      .reviews-container {
        grid-template-columns: 1fr;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .review-form-section {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <nav class="nav-container">
      <a href="index.html" class="logo">ABHIRAM CREATIONS</a>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="store.html">Store</a>
        <div class="auth-buttons" id="authButtons">
          <button class="btn btn-outline" onclick="showLoginModal()">Login</button>
          <button class="btn btn-primary" onclick="showRegisterModal()">Register</button>
        </div>
        <div class="auth-buttons" id="userMenu" style="display: none;">
          <span id="userName" style="color: var(--primary); margin-right: 10px;"></span>
          <button class="btn btn-outline" onclick="logout()">Logout</button>
        </div>
      </div>
    </nav>
  </header>

  <main class="main-container">
    <div class="store-header">
      <h1>Digital Assets Store</h1>
      <p>Discover premium video templates, project files, fonts, and effects</p>
    </div>

    <div class="filters">
      <div class="filter-group">
        <label for="categoryFilter">Category</label>
        <select id="categoryFilter" onchange="filterItems()">
          <option value="all">All Categories</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="sortFilter">Sort By</label>
        <select id="sortFilter" onchange="filterItems()">
          <option value="newest">Newest First</option>
          <option value="popular">Most Popular</option>
          <option value="price_low">Price: Low to High</option>
          <option value="price_high">Price: High to Low</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="searchBox">Search</label>
        <input type="text" id="searchBox" class="search-box" placeholder="Search templates..." oninput="filterItems()">
      </div>
    </div>

    <div id="storeContent">
      <div class="loading">Loading store items...</div>
    </div>

    <!-- Reviews/Feedback Section -->
    <section class="reviews-section" id="reviews">
      <div class="section-header">
        <h2>What Clients Say</h2>
        <p>See what our customers are saying about our products and services</p>
      </div>

      <!-- Reviews Display -->
      <div id="reviewsContainer" class="reviews-container">
        <div class="loading">Loading reviews...</div>
      </div>

      <!-- Review Form -->
      <div class="review-form-section">
        <h3>Share Your Experience</h3>
        <p>We'd love to hear from you! Share your feedback about our products.</p>
        <form id="reviewForm" class="review-form">
          <div class="form-row">
            <div class="form-group">
              <label for="reviewName">Your Name *</label>
              <input type="text" id="reviewName" name="name" placeholder="Enter your name" required>
            </div>
            <div class="form-group">
              <label for="reviewEmail">Email (optional)</label>
              <input type="email" id="reviewEmail" name="email" placeholder="your@email.com">
            </div>
          </div>
          <div class="form-group">
            <label for="reviewRating">Rating *</label>
            <div class="star-rating-input">
              <input type="radio" id="star5" name="rating" value="5" required>
              <label for="star5" class="star">‚òÖ</label>
              <input type="radio" id="star4" name="rating" value="4">
              <label for="star4" class="star">‚òÖ</label>
              <input type="radio" id="star3" name="rating" value="3">
              <label for="star3" class="star">‚òÖ</label>
              <input type="radio" id="star2" name="rating" value="2">
              <label for="star2" class="star">‚òÖ</label>
              <input type="radio" id="star1" name="rating" value="1">
              <label for="star1" class="star">‚òÖ</label>
            </div>
          </div>
          <div class="form-group">
            <label for="reviewMessage">Your Review *</label>
            <textarea id="reviewMessage" name="message" rows="5" placeholder="Tell us about your experience..." required></textarea>
          </div>
          <button type="submit" class="btn btn-primary review-submit-btn">Submit Review</button>
        </form>
      </div>
    </section>
  </main>

  <!-- Login Modal -->
  <div class="login-modal" id="loginModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Login</h2>
        <p>Access your account to download items</p>
      </div>
      <form id="loginForm">
        <div class="form-group">
          <label for="loginUsername">Username or Email</label>
          <input type="text" id="loginUsername" required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <input type="password" id="loginPassword" required>
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">Login</button>
          <button type="button" class="btn btn-close" onclick="closeModal('loginModal')">Cancel</button>
        </div>
      </form>
      <div class="divider">
        <span>OR</span>
      </div>
      <div class="social-buttons-container">
        <button type="button" class="google-signin-btn" id="googleLoginBtn" onclick="loginWithGoogle()">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Sign in with Google
        </button>
        <button type="button" class="facebook-signin-btn" id="facebookLoginBtn" onclick="loginWithFacebook()">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
          Sign in with Facebook
        </button>
        <button type="button" class="instagram-signin-btn" id="instagramLoginBtn" onclick="loginWithInstagram()">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
          Sign in with Instagram
        </button>
      </div>
    </div>
  </div>

  <!-- Register Modal -->
  <div class="login-modal" id="registerModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Register</h2>
        <p>Create an account to start downloading</p>
      </div>
      <form id="registerForm">
        <div class="form-group">
          <label for="registerUsername">Username</label>
          <input type="text" id="registerUsername" required>
        </div>
        <div class="form-group">
          <label for="registerEmail">Email</label>
          <input type="email" id="registerEmail" required>
        </div>
        <div class="form-group">
          <label for="registerFullName">Full Name</label>
          <input type="text" id="registerFullName" required>
        </div>
        <div class="form-group">
          <label for="registerPassword">Password</label>
          <input type="password" id="registerPassword" required minlength="6">
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">Register</button>
          <button type="button" class="btn btn-close" onclick="closeModal('registerModal')">Cancel</button>
        </div>
      </form>
      <div class="divider">
        <span>OR</span>
      </div>
      <div class="social-buttons-container">
        <button type="button" class="google-signin-btn" id="googleRegisterBtn" onclick="loginWithGoogle()">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Sign in with Google
        </button>
        <button type="button" class="facebook-signin-btn" id="facebookRegisterBtn" onclick="loginWithFacebook()">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
          Sign in with Facebook
        </button>
        <button type="button" class="instagram-signin-btn" id="instagramRegisterBtn" onclick="loginWithInstagram()">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
          Sign in with Instagram
        </button>
      </div>
    </div>
  </div>

  <script>
    // API Configuration - Use current origin for Replit compatibility
    const API_BASE_URL = window.location.origin;
    
    let storeItems = [];
    let categories = [];
    let currentUser = null;

    // Check if user is already logged in
    function checkAuthStatus() {
      const token = localStorage.getItem('userToken');
      if (token) {
        fetchUserProfile(token);
      }
    }

    // Load store data
    async function loadStoreData() {
      try {
        // Load categories
        const categoriesResponse = await fetch(`${API_BASE_URL}/api/store/categories`);
        if (!categoriesResponse.ok) {
          throw new Error('Failed to fetch categories');
        }
        categories = await categoriesResponse.json();
        
        // Populate category filter
        const categoryFilter = document.getElementById('categoryFilter');
        categories.forEach(category => {
          const option = document.createElement('option');
          option.value = category.name;
          option.textContent = `${category.icon} ${category.name}`;
          categoryFilter.appendChild(option);
        });

        // Load store items
        await loadStoreItems();
      } catch (error) {
        console.error('Error loading store data:', error);
        showError('Failed to load store data. Please refresh the page or try again later.');
      }
    }

    // Load store items
    async function loadStoreItems() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/store/items`);
        if (!response.ok) {
          throw new Error('Failed to fetch store items');
        }
        storeItems = await response.json();
        renderStoreItems(storeItems);
      } catch (error) {
        console.error('Error loading store items:', error);
          showError('Failed to load store items. Please refresh the page or try again later.');
      }
    }

    // Filter and sort items
    function filterItems() {
      const category = document.getElementById('categoryFilter').value;
      const sort = document.getElementById('sortFilter').value;
      const search = document.getElementById('searchBox').value.toLowerCase();

      let filtered = storeItems.filter(item => {
        const matchesCategory = category === 'all' || item.category === category;
        const matchesSearch = !search || 
          item.title.toLowerCase().includes(search) || 
          item.description.toLowerCase().includes(search);
        return matchesCategory && matchesSearch;
      });

      // Sort items
      switch (sort) {
        case 'price_low':
          filtered.sort((a, b) => a.price - b.price);
          break;
        case 'price_high':
          filtered.sort((a, b) => b.price - a.price);
          break;
        case 'popular':
          filtered.sort((a, b) => (b.download_count || 0) - (a.download_count || 0));
          break;
        case 'newest':
        default:
          filtered.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
          break;
      }

      renderStoreItems(filtered);
    }

    // Render store items
    function renderStoreItems(items) {
      const storeContent = document.getElementById('storeContent');
      
      if (items.length === 0) {
        storeContent.innerHTML = '<div class="error">No items found matching your criteria</div>';
        return;
      }

      storeContent.innerHTML = `
        <div class="store-grid">
          ${items.map(item => `
            <div class="store-item">
              <div class="item-image">
                ${item.image_path ? `<img src="${API_BASE_URL}/uploads/images/${item.image_path}" alt="${item.title}">` : 'üìÅ'}
              </div>
              <div class="item-content">
                <div class="item-header">
                  <div>
                    <div class="item-title">${item.title}</div>
                    <div class="item-category">${item.category || 'Template'}</div>
                  </div>
                  <div class="item-price">
                    ${item.is_free ? 'FREE' : `$${item.price}`}
                  </div>
                </div>
                <div class="item-description">${item.description || 'No description available'}</div>
                <div class="item-meta">
                  <span>Downloads: ${item.download_count || 0}</span>
                  <span>${item.file_type || 'File'}</span>
                </div>
                <div class="item-actions">
                  ${item.is_free ? 
                    `<button class="btn-download" onclick="downloadItem(${item.id})">Download</button>` :
                    `<button class="btn-purchase" onclick="purchaseItem(${item.id})">Purchase $${item.price}</button>`
                  }
                </div>
              </div>
            </div>
          `).join('')}
        </div>
      `;
    }

    // Download item
    async function downloadItem(itemId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }

      try {
        const response = await fetch(`${API_BASE_URL}/api/store/download/${itemId}`, {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('userToken')}`
          }
        });

        if (response.ok) {
          // Create a temporary link to trigger download
          const blob = await response.blob();
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `item_${itemId}`;
          document.body.appendChild(a);
          a.click();
          window.URL.revokeObjectURL(url);
          document.body.removeChild(a);
          
          // Refresh store items to update download count
          await loadStoreItems();
          showSuccess('Download started!');
        } else {
          const error = await response.json();
          showError(error.message || 'Failed to download item');
        }
      } catch (error) {
        console.error('Download error:', error);
        showError('Failed to download item. Make sure the backend server is running.');
      }
    }

    // Purchase item
    async function purchaseItem(itemId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }

      try {
        const response = await fetch(`${API_BASE_URL}/api/payments/create-checkout-session`, {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('userToken')}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ projectId: itemId })
        });

        const result = await response.json();

        if (response.ok) {
          // If Stripe provided a hosted checkout URL, redirect there
          if (result.url) {
            window.location.href = result.url;
            return;
          }

          // Fallback simulated purchase URL
          if (result.redirectUrl) {
            showSuccess(result.message || 'Purchase completed');
            await loadStoreItems();
            window.location.href = result.redirectUrl;
            return;
          }

          showSuccess(result.message || 'Purchase initiated');
        } else {
          showError(result.message || 'Failed to create checkout session');
        }
      } catch (error) {
        console.error('Purchase error:', error);
        showError('Failed to purchase item. Make sure the backend server is running.');
      }
    }

    // Show login modal
    function showLoginModal() {
      document.getElementById('loginModal').style.display = 'flex';
    }

    // Show register modal
    function showRegisterModal() {
      document.getElementById('registerModal').style.display = 'flex';
    }

    // Close modal
    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // Handle login form submission
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Logging in...';
      submitBtn.disabled = true;

      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/login`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ username, password })
        });

        const result = await response.json();

        if (response.ok) {
          localStorage.setItem('userToken', result.token);
          currentUser = result.user;
          updateAuthUI();
          closeModal('loginModal');
          document.getElementById('loginForm').reset();
          showSuccess('Login successful! Welcome back!');
        } else {
          showError(result.message || 'Login failed. Please check your credentials.');
        }
      } catch (error) {
        console.error('Login error:', error);
        showError('Login failed. Please check your credentials and try again.');
      } finally {
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });

    // Handle register form submission
    document.getElementById('registerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const username = document.getElementById('registerUsername').value;
      const email = document.getElementById('registerEmail').value;
      const fullName = document.getElementById('registerFullName').value;
      const password = document.getElementById('registerPassword').value;
      
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Registering...';
      submitBtn.disabled = true;

      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/register`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ username, email, fullName, password })
        });

        const result = await response.json();

        if (response.ok) {
          localStorage.setItem('userToken', result.token);
          currentUser = result.user;
          updateAuthUI();
          closeModal('registerModal');
          document.getElementById('registerForm').reset();
          showSuccess('Registration successful! Welcome to ABHIRAM CREATIONS!');
        } else {
          showError(result.message || 'Registration failed. Please try again.');
        }
      } catch (error) {
        console.error('Registration error:', error);
        showError('Registration failed. Please try again later.');
      } finally {
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });

    // Fetch user profile
    async function fetchUserProfile(token) {
      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/profile`, {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        if (response.ok) {
          const result = await response.json();
          currentUser = result.user;
          updateAuthUI();
        } else {
          localStorage.removeItem('userToken');
        }
      } catch (error) {
        console.error('Profile fetch error:', error);
        localStorage.removeItem('userToken');
      }
    }

    // Update authentication UI
    function updateAuthUI() {
      if (currentUser) {
        document.getElementById('authButtons').style.display = 'none';
        document.getElementById('userMenu').style.display = 'flex';
        document.getElementById('userName').textContent = currentUser.fullName || currentUser.username;
      } else {
        document.getElementById('authButtons').style.display = 'flex';
        document.getElementById('userMenu').style.display = 'none';
      }
    }

    // Logout
    function logout() {
      localStorage.removeItem('userToken');
      currentUser = null;
      updateAuthUI();
    }

    // Show error message
    function showError(message) {
      // Remove existing notifications
      const existingNotification = document.querySelector('.notification');
      if (existingNotification) {
        existingNotification.remove();
      }

      // Create notification element
      const notification = document.createElement('div');
      notification.className = 'notification notification-error';
      notification.innerHTML = `
        <div class="notification-content">
          <span class="notification-message">${message}</span>
          <button class="notification-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
        </div>
      `;

      // Add styles
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #ff4757;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 10000;
        max-width: 400px;
        animation: slideInRight 0.3s ease;
      `;

      notification.querySelector('.notification-content').style.cssText = `
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      `;

      notification.querySelector('.notification-close').style.cssText = `
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        padding: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      `;

      // Add to page
      document.body.appendChild(notification);

      // Auto remove after 5 seconds
      setTimeout(() => {
        if (notification.parentElement) {
          notification.style.animation = 'slideOutRight 0.3s ease';
          setTimeout(() => notification.remove(), 300);
        }
      }, 5000);
    }

    // Show success message
    function showSuccess(message) {
      // Remove existing notifications
      const existingNotification = document.querySelector('.notification');
      if (existingNotification) {
        existingNotification.remove();
      }

      // Create notification element
      const notification = document.createElement('div');
      notification.className = 'notification notification-success';
      notification.innerHTML = `
        <div class="notification-content">
          <span class="notification-message">${message}</span>
          <button class="notification-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
        </div>
      `;

      // Add styles
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #00bfa6;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 10000;
        max-width: 400px;
        animation: slideInRight 0.3s ease;
      `;

      notification.querySelector('.notification-content').style.cssText = `
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      `;

      notification.querySelector('.notification-close').style.cssText = `
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        padding: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      `;

      // Add to page
      document.body.appendChild(notification);

      // Auto remove after 5 seconds
      setTimeout(() => {
        if (notification.parentElement) {
          notification.style.animation = 'slideOutRight 0.3s ease';
          setTimeout(() => notification.remove(), 300);
        }
      }, 5000);
    }

    // Add CSS animations for notifications
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);

    // Reviews functionality
    const GOOGLE_SHEETS_WEB_APP_URL = ''; // Add your Google Apps Script Web App URL here
    
    // Load reviews from backend/Google Sheets
    async function loadReviews() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/public/reviews`);
        if (!response.ok) {
          throw new Error('Failed to fetch reviews');
        }
        const reviews = await response.json();
        renderReviews(reviews);
      } catch (error) {
        console.error('Error loading reviews:', error);
        const reviewsContainer = document.getElementById('reviewsContainer');
        reviewsContainer.innerHTML = '<div class="no-reviews">No reviews available at the moment. Be the first to leave a review!</div>';
      }
    }

    // Render reviews
    function renderReviews(reviews) {
      const reviewsContainer = document.getElementById('reviewsContainer');
      
      if (!reviews || reviews.length === 0) {
        reviewsContainer.innerHTML = '<div class="no-reviews">No reviews yet. Be the first to leave a review!</div>';
        return;
      }

      reviewsContainer.innerHTML = reviews.map(review => {
        const stars = '‚òÖ'.repeat(review.rating) + '‚òÜ'.repeat(5 - review.rating);
        const date = new Date(review.timestamp || review.created_at).toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
        
        return `
          <div class="review-card">
            <div class="review-header">
              <div class="review-author">${escapeHtml(review.name || 'Anonymous')}</div>
              <div class="review-rating" title="${review.rating} out of 5 stars">${stars}</div>
            </div>
            <div class="review-date">${date}</div>
            <div class="review-message">${escapeHtml(review.message)}</div>
          </div>
        `;
      }).join('');
    }

    // Escape HTML to prevent XSS
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Handle review form submission
    document.getElementById('reviewForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const form = e.target;
      const formData = {
        name: document.getElementById('reviewName').value.trim(),
        email: document.getElementById('reviewEmail').value.trim(),
        rating: form.querySelector('input[name="rating"]:checked')?.value,
        message: document.getElementById('reviewMessage').value.trim()
      };

      // Validation
      if (!formData.name || !formData.message || !formData.rating) {
        showError('Please fill in all required fields (name, rating, and review).');
        return;
      }

      const submitBtn = form.querySelector('.review-submit-btn');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Submitting...';
      submitBtn.disabled = true;

      try {
        const response = await fetch(`${API_BASE_URL}/api/public/review`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (response.ok) {
          showSuccess(result.message || 'Thank you for your review!');
          form.reset();
          // Reset star rating
          form.querySelectorAll('input[name="rating"]').forEach(radio => radio.checked = false);
          // Reload reviews to show the new one
          await loadReviews();
        } else {
          showError(result.message || 'Failed to submit review. Please try again.');
        }
      } catch (error) {
        console.error('Review submission error:', error);
        showError('Failed to submit review. Make sure the backend server is running.');
      } finally {
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });

    // Check OAuth configuration for all providers
    let oauthStatus = {
      google: false,
      facebook: false,
      instagram: false
    };

    async function checkOAuthStatus() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/status`);
        if (response.ok) {
          const status = await response.json();
          oauthStatus.google = status.google.configured;
          oauthStatus.facebook = status.facebook.configured;
          oauthStatus.instagram = status.instagram.configured;
          
          // Show/hide buttons based on configuration
          const googleButtons = document.querySelectorAll('.google-signin-btn');
          googleButtons.forEach(btn => {
            btn.style.display = oauthStatus.google ? 'flex' : 'none';
            btn.disabled = !oauthStatus.google;
          });

          const facebookButtons = document.querySelectorAll('.facebook-signin-btn');
          facebookButtons.forEach(btn => {
            btn.style.display = oauthStatus.facebook ? 'flex' : 'none';
            btn.disabled = !oauthStatus.facebook;
          });

          const instagramButtons = document.querySelectorAll('.instagram-signin-btn');
          instagramButtons.forEach(btn => {
            btn.style.display = oauthStatus.instagram ? 'flex' : 'none';
            btn.disabled = !oauthStatus.instagram;
          });
        }
      } catch (error) {
        console.error('Error checking OAuth status:', error);
        // Hide all buttons if check fails
        document.querySelectorAll('.google-signin-btn, .facebook-signin-btn, .instagram-signin-btn').forEach(btn => {
          btn.style.display = 'none';
        });
      }
    }

    // Google Sign-In function
    async function loginWithGoogle() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/google`);
        const data = await response.json();
        
        if (!response.ok || !data.success) {
          showError(data.message || 'Failed to initialize Google Sign-In. Please check your configuration.');
          return;
        }
        
        if (!data.authUrl) {
          showError('Google OAuth is not configured. Please contact the administrator.');
          return;
        }
        
        // Redirect to Google OAuth
        window.location.href = data.authUrl;
      } catch (error) {
        console.error('Google Sign-In error:', error);
        showError('Failed to initialize Google Sign-In. Make sure the backend server is running.');
      }
    }

    // Facebook Sign-In function
    async function loginWithFacebook() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/facebook`);
        const data = await response.json();
        
        if (!response.ok || !data.success) {
          showError(data.message || 'Failed to initialize Facebook Sign-In. Please check your configuration.');
          return;
        }
        
        if (!data.authUrl) {
          showError('Facebook OAuth is not configured. Please contact the administrator.');
          return;
        }
        
        // Redirect to Facebook OAuth
        window.location.href = data.authUrl;
      } catch (error) {
        console.error('Facebook Sign-In error:', error);
        showError('Failed to initialize Facebook Sign-In. Make sure the backend server is running.');
      }
    }

    // Instagram Sign-In function
    async function loginWithInstagram() {
      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/instagram`);
        const data = await response.json();
        
        if (!response.ok || !data.success) {
          showError(data.message || 'Failed to initialize Instagram Sign-In. Please check your configuration.');
          return;
        }
        
        if (!data.authUrl) {
          showError('Instagram OAuth is not configured. Please contact the administrator.');
          return;
        }
        
        // Redirect to Instagram OAuth
        window.location.href = data.authUrl;
      } catch (error) {
        console.error('Instagram Sign-In error:', error);
        showError('Failed to initialize Instagram Sign-In. Make sure the backend server is running.');
      }
    }

    // Handle OAuth callback from URL parameters
    function handleOAuthCallback() {
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      const email = urlParams.get('email');
      const name = urlParams.get('name');
      const error = urlParams.get('error');

      const provider = urlParams.get('provider') || 'google';

      if (error) {
        let errorMessage = 'Authentication failed. Please try again.';
        if (error === 'oauth_failed') {
          errorMessage = `${provider.charAt(0).toUpperCase() + provider.slice(1)} authentication failed. Please try again.`;
        } else if (error === 'oauth_not_configured') {
          errorMessage = `${provider.charAt(0).toUpperCase() + provider.slice(1)} OAuth is not configured. Please use email/password login or contact the administrator.`;
        } else if (error === 'oauth_invalid_client') {
          errorMessage = 'OAuth client configuration error. The client ID may be incorrect or the redirect URI doesn\'t match Google Cloud Console. Please contact the administrator.';
        } else if (error === 'oauth_cancelled') {
          errorMessage = 'OAuth authentication was cancelled. Please try again if you want to sign in.';
        } else if (error === 'oauth_token_exchange_failed') {
          errorMessage = 'Failed to complete OAuth authentication. Please try again.';
        } else if (error === 'no_email') {
          errorMessage = 'Unable to get email from your account.';
        } else if (error === 'database_error') {
          errorMessage = 'Database error. Please contact support.';
        } else if (error === 'user_creation_failed') {
          errorMessage = 'Failed to create user account. Please try again or contact support.';
        } else if (error === 'oauth_error') {
          errorMessage = `An error occurred during ${provider} authentication. Please try again.`;
        }
        showError(errorMessage);
        // Clean up URL
        window.history.replaceState({}, document.title, window.location.pathname);
        return;
      }

      if (token && email) {
        localStorage.setItem('userToken', token);
        currentUser = {
          email: decodeURIComponent(email),
          fullName: name ? decodeURIComponent(name) : email.split('@')[0],
          authProvider: provider
        };
        updateAuthUI();
        showSuccess(`Welcome back, ${currentUser.fullName}!`);
        // Clean up URL
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      handleOAuthCallback(); // Check for OAuth callback first
      checkAuthStatus();
      checkOAuthStatus(); // Check if OAuth providers are configured
      loadStoreData();
      loadReviews();
    });

    // Close modals when clicking outside
    window.addEventListener('click', (e) => {
      if (e.target.classList.contains('login-modal')) {
        e.target.style.display = 'none';
      }
    });
  </script>
</body>
</html>
